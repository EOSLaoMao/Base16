machine:
  xcode:
    version: "8.1"

checkout:
  post:
    - git submodule update --init --recursive

test:
  override:
    - swift test
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base16 (iOS)' -destination 'id=2D96E690-BFB5-44D5-8B22-31D9C57EDADF' clean build test | xcpretty 
      && bash <(curl -s https://codecov.io/bash)
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base16 (macOS)' clean build test | xcpretty
      && bash <(curl -s https://codecov.io/bash)
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base16 (tvOS)' -destination 'id=48B0E1AB-F5EB-40FB-9372-A16B93349B12' clean build test | xcpretty
      && bash <(curl -s https://codecov.io/bash)
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base16 (watchOS)' clean build | xcpretty
      && bash <(curl -s https://codecov.io/bash)
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base32 (iOS)' -destination 'id=2D96E690-BFB5-44D5-8B22-31D9C57EDADF' clean build test | xcpretty
      && bash <(curl -s https://codecov.io/bash)
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base32 (macOS)' clean build test | xcpretty
      && bash <(curl -s https://codecov.io/bash)
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base32 (tvOS)' -destination 'id=48B0E1AB-F5EB-40FB-9372-A16B93349B12' clean build test | xcpretty
      && bash <(curl -s https://codecov.io/bash)
    - set -o pipefail
      && xcodebuild -project 'Bases.xcodeproj' -scheme 'Base32 (watchOS)' clean build | xcpretty
      && bash <(curl -s https://codecov.io/bash)
